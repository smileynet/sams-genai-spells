# CLAUDE.md

## Repository Overview

This is **Sam's Spells** — a multi-platform AI command plugin providing prompt engineering techniques as reusable slash commands. Supports Claude Code, OpenCode, and Kiro.

## Project Structure

```
sams_spells/
├── core/templates/commands/    # Source of truth — .md.template files
├── plugins/
│   ├── claude-code/            # /spell:command — generated by sync
│   ├── opencode/               # /spell-command — generated by sync
│   └── kiro/                   # @spell-command — generated by sync
├── dev/
│   ├── sync-commands.sh        # Template → platform sync
│   └── install-claude-code.sh  # Local Claude Code install
├── docs/tutorials/             # Human-readable technique guides
└── docs/skills/                # AI skill references (loaded by spells)
```

## Key Commands

```bash
# Sync templates to all platforms after editing
./dev/sync-commands.sh

# Install locally for Claude Code testing
./dev/install-claude-code.sh
```

## Editing Commands

1. Edit the template in `core/templates/commands/<name>.md.template`
2. Run `./dev/sync-commands.sh` to generate platform files
3. Run `./dev/install-claude-code.sh` to test locally
4. Never edit files in `plugins/*/commands/` directly — they're generated

## Template System

Templates use conditional blocks for platform-specific content:

- `@NAMESPACE@` → replaced with `spell:` (Claude Code), `spell-` (OpenCode/Kiro)
- `@IF_CLAUDECODE@` / `@ENDIF_CLAUDECODE@` → Claude Code-only content
- `@IF_OPENCODE@` / `@ENDIF_OPENCODE@` → OpenCode-only content
- `@IF_KIRO@` / `@ENDIF_KIRO@` → Kiro-only content

## The Six Spells

| Spell | Type | Description |
|-------|------|-------------|
| idiomatic | Modifier | Session constraints for canonical tool/language patterns |
| socratic | Modifier | Shifts AI to Socratic questioning mode |
| best-practices | Workflow | Researched do's-and-don'ts document |
| progressive-disclosure | Workflow | Linked files at progressive detail levels |
| diataxis | Workflow | Four-quadrant documentation (audit/restructure/generate) |
| task-graph | Workflow | Map task dependencies or diagram a workflow using DAGs and critical path analysis |

Plus meta commands: `help` and `teach`.

## How It Works

Each spell is a markdown template in `core/templates/commands/`. The sync script (`dev/sync-commands.sh`) generates platform-specific versions for Claude Code, OpenCode, and Kiro — handling namespace differences, conditional blocks, and frontmatter.

```
core/templates/commands/       → Single source of truth
  ↓ dev/sync-commands.sh
plugins/claude-code/commands/  → /spell:command
plugins/opencode/commands/     → /spell-command
plugins/kiro/prompts/          → @spell-command
```

## Voice and Tone

- **Tutorials and README**: Humorous, self-deprecating. Sam didn't invent these techniques, he just packaged them.
- **Command templates**: Clear, direct instructions. No humor in process steps.
- **CLAUDE.md and manifests**: Technical, professional.
